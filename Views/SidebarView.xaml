<UserControl x:Class="PrintVault3D.Views.SidebarView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:vm="clr-namespace:PrintVault3D.ViewModels"
             xmlns:converters="clr-namespace:PrintVault3D.Converters"
             xmlns:helpers="clr-namespace:PrintVault3D.Helpers"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="260">
    <UserControl.Resources>
         <converters:BoolToVisibilityConverter x:Key="BoolToVis"/>
         <converters:SelectionToVisibilityConverter x:Key="SelectionToVis"/>
         <converters:IsSelectedConverter x:Key="IsSelected"/>
         <converters:CategoryColorConverter x:Key="CategoryColor"/>
         <converters:EqualityConverter x:Key="EqualityConverter"/>
         <converters:NullToVisibilityConverter x:Key="NullToVisConverter"/>
         <converters:HexColorToBrushConverter x:Key="HexToBrush"/>
         
         <!-- Expander Style -->
         <Style x:Key="SidebarExpander" TargetType="Expander">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="VerticalContentAlignment" Value="Stretch"/>
            <Setter Property="IsExpanded" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Expander">
                        <DockPanel>
                            <ToggleButton x:Name="HeaderSite"
                                          DockPanel.Dock="Top"
                                          HorizontalContentAlignment="Stretch"
                                          VerticalContentAlignment="Center"
                                          Background="Transparent"
                                          BorderThickness="0"
                                          Padding="12,12,12,8"
                                          Foreground="{TemplateBinding Foreground}"
                                          IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                                <ToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border x:Name="headerBorder" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <ContentPresenter Grid.Column="0" Content="{TemplateBinding Content}" VerticalAlignment="Center"/>
                                                <Path x:Name="arrow" Grid.Column="1" 
                                                      Data="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"
                                                      Fill="{TemplateBinding Foreground}"
                                                      Width="10" Height="10" Stretch="Uniform"
                                                      RenderTransformOrigin="0.5,0.5">
                                                    <Path.RenderTransform>
                                                        <RotateTransform Angle="0"/>
                                                    </Path.RenderTransform>
                                                </Path>
                                            </Grid>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsChecked" Value="False">
                                                <Setter TargetName="arrow" Property="RenderTransform">
                                                    <Setter.Value>
                                                        <RotateTransform Angle="-90"/>
                                                    </Setter.Value>
                                                </Setter>
                                                <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                                            </Trigger>
                                            <Trigger Property="IsChecked" Value="True">
                                                <Setter Property="Foreground" Value="{StaticResource AccentCyanBrush}"/>
                                                <Setter TargetName="arrow" Property="Fill" Value="{StaticResource AccentCyanBrush}"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="headerBorder" Property="Background" Value="#0DFFFFFF"/>
                                                <Setter Property="Foreground" Value="{StaticResource AccentCyanBrush}"/>
                                                <Setter TargetName="arrow" Property="Fill" Value="{StaticResource AccentCyanBrush}"/>
                                                <Setter Property="Cursor" Value="Hand"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                                <ToggleButton.Content>
                                    <ContentPresenter Content="{TemplateBinding Header}" ContentTemplate="{TemplateBinding HeaderTemplate}"/>
                                </ToggleButton.Content>
                            </ToggleButton>
                            <ContentPresenter x:Name="ExpandSite"
                                              DockPanel.Dock="Bottom"
                                              Visibility="Collapsed"
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                              Margin="{TemplateBinding Padding}"/>
                        </DockPanel>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsExpanded" Value="True">
                                <Setter TargetName="ExpandSite" Property="Visibility" Value="Visible"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Border Background="{StaticResource BackgroundMediumBrush}"
            BorderBrush="{StaticResource BorderBrush}"
            BorderThickness="0,0,1,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Logo & Title -->
                <StackPanel Grid.Row="0" Margin="24,28,24,24">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                        <!-- STLZ Logo Image -->
                        <Image Source="/Assets/logo.png"
                               Width="48" Height="48"
                               VerticalAlignment="Center"
                               Margin="0,0,16,0">
                              <Image.Effect>
                                  <DropShadowEffect Color="{StaticResource AccentCyan}" BlurRadius="15" ShadowDepth="0" Opacity="0.5"/>
                              </Image.Effect>
                        </Image>
                        <TextBlock Text="STLZ" 
                                   Style="{StaticResource HeaderText}"
                                   FontSize="28"
                                   FontWeight="Bold"/>
                    </StackPanel>
                    <TextBlock Text="Zero-Click Asset Manager" 
                               Style="{StaticResource CaptionText}"
                               Margin="0,4,0,0"
                               Opacity="0.7"/>
                </StackPanel>

                <!-- Search Box -->
                <TextBox Grid.Row="1" 
                         Style="{StaticResource SearchTextBox}"
                         Tag="Search models..."
                         Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                         Margin="16,0,16,16"/>

                <!-- Categories List -->
                <ScrollViewer Grid.Row="2" 
                              VerticalScrollBarVisibility="Auto"
                              Margin="8,0">
                    <StackPanel>
                        <!-- CATEGORIES SECTION -->
                        <Expander Style="{StaticResource SidebarExpander}">
                            <Expander.Header>
                                <TextBlock Text="CATEGORIES" 
                                           Style="{StaticResource CaptionText}"
                                           FontWeight="SemiBold"
                                           FontSize="11"/>
                            </Expander.Header>
                            <StackPanel>
                                <Button Content="All Models"
                                        Command="{Binding ClearAllFiltersCommand}"
                                        Background="Transparent"
                                        Foreground="{StaticResource TextSecondaryBrush}"
                                        HorizontalContentAlignment="Left"
                                        Padding="12,8"
                                        Margin="8,0,8,4"
                                        Cursor="Hand">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="4" Padding="{TemplateBinding Padding}">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Path Data="M3,13H5V3H3V13M3,17H5V15H3V17M7,13H9V3H7V13M7,17H9V15H7V17M11,13H13V3H11V13M11,17H13V15H11V17M15,13H21V3H15V13M15,17H21V15H15V17Z" 
                                                          Fill="{StaticResource TextSecondaryBrush}"
                                                          Width="14" Height="14"
                                                          Margin="0,0,12,0"
                                                          VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Column="1" Text="{TemplateBinding Content}" VerticalAlignment="Center" Foreground="{TemplateBinding Foreground}"/>
                                                </Grid>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#1AFFFFFF"/>
                                                    <Setter Property="Foreground" Value="{StaticResource AccentCyanBrush}"/>
                                                    <Setter Property="Cursor" Value="Hand"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>

                                
                                <ListBox ItemsSource="{Binding Categories}"
                                         SelectedItem="{Binding SelectedCategory}"
                                         Style="{StaticResource CategoryListBox}"
                                         Margin="8,0">
                                    <ListBox.ItemContainerStyle>
                                        <Style TargetType="ListBoxItem" BasedOn="{StaticResource CategoryListItem}"/>
                                    </ListBox.ItemContainerStyle>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Grid AllowDrop="True"
                                                  Drop="CategoryItem_Drop"
                                                  DragOver="CategoryItem_DragOver"
                                                  DragEnter="CategoryItem_DragEnter"
                                                  DragLeave="CategoryItem_DragLeave">
                                                <Grid.Style>
                                                    <Style TargetType="Grid">
                                                        <Setter Property="Background" Value="Transparent"/>
                                                        <Style.Triggers>
                                                            <Trigger Property="helpers:DragDropHelper.IsDragOver" Value="True">
                                                                <Setter Property="Background" Value="#2200FFFF"/> <!-- Cyan Glow -->
                                                                <Setter Property="Effect">
                                                                    <Setter.Value>
                                                                        <DropShadowEffect Color="#00FFFF" BlurRadius="10" ShadowDepth="0" Opacity="0.6"/>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Grid.Style>
                                                
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>

                                                    <!-- Color Dot -->
                                                    <Ellipse Grid.Column="0"
                                                             Width="8" Height="8" 
                                                             Fill="{Binding Name, Converter={StaticResource CategoryColor}}"
                                                             Margin="0,0,12,0"/>
                                                    
                                                    <!-- Name -->
                                                    <TextBlock Grid.Column="1"
                                                               Text="{Binding Name}" 
                                                               VerticalAlignment="Center"
                                                               TextTrimming="CharacterEllipsis"/>
                                                    
                                                    <!-- Count Badge -->
                                                    <Border Grid.Column="2" 
                                                            Background="{StaticResource BackgroundLightBrush}"
                                                            CornerRadius="10"
                                                            Padding="8,1"
                                                            VerticalAlignment="Center"
                                                            Margin="8,0,0,0">
                                                        <TextBlock Text="{Binding ModelCount}"
                                                                   FontSize="10"
                                                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                                                    </Border>
                                                </Grid>
                                            </Grid>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </StackPanel>
                        </Expander>

                        <!-- COLLECTIONS SECTION -->
                        <Expander Style="{StaticResource SidebarExpander}">
                            <Expander.Header>
                                <Grid>
                                    <TextBlock Text="COLLECTIONS" 
                                               Style="{StaticResource CaptionText}"
                                               FontWeight="SemiBold"
                                               FontSize="11"
                                               VerticalAlignment="Center"/>
                                    <Button Style="{StaticResource IconButton}"
                                            Command="{Binding CreateCollectionCommand}"
                                            HorizontalAlignment="Right"
                                            Width="24" Height="24"
                                            Padding="4"
                                            ToolTip="New Collection"
                                            Background="#33FFFFFF"
                                            Margin="0,0,20,0">
                                        <Path Data="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"
                                              Fill="{StaticResource AccentCyanBrush}"
                                              Width="14" Height="14"
                                              Stretch="Uniform"/>
                                    </Button>
                                </Grid>
                            </Expander.Header>
                            <ListBox ItemsSource="{Binding Collections}"
                                     SelectedItem="{Binding SelectedCollection}"
                                     Style="{StaticResource CategoryListBox}"
                                     Margin="8,0">
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem" BasedOn="{StaticResource CategoryListItem}"/>
                                </ListBox.ItemContainerStyle>
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid AllowDrop="True"
                                              Drop="CollectionItem_Drop" 
                                              DragOver="CollectionItem_DragOver"
                                              DragEnter="CollectionItem_DragEnter"
                                              DragLeave="CollectionItem_DragLeave">
                                            <Grid.Style>
                                                <Style TargetType="Grid">
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Style.Triggers>
                                                        <Trigger Property="helpers:DragDropHelper.IsDragOver" Value="True">
                                                            <Setter Property="Background" Value="#2200FFFF"/>
                                                            <Setter Property="Effect">
                                                                <Setter.Value>
                                                                    <DropShadowEffect Color="#00FFFF" BlurRadius="10" ShadowDepth="0" Opacity="0.6"/>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Grid.Style>
                                            
                                            <!-- Context Menu for Collections -->
                                            <Grid.ContextMenu>
                                                <ContextMenu Background="{StaticResource BackgroundMediumBrush}"
                                                             BorderBrush="{StaticResource BorderBrush}"
                                                             Foreground="{StaticResource TextPrimaryBrush}">
                                                    <MenuItem Header="Rename" 
                                                              Click="RenameCollection_Click"
                                                              Tag="{Binding}">
                                                        <MenuItem.Icon>
                                                            <Path Data="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"
                                                                  Fill="{StaticResource TextSecondaryBrush}"
                                                                  Width="14" Height="14" Stretch="Uniform"/>
                                                        </MenuItem.Icon>
                                                    </MenuItem>
                                                    <MenuItem Header="Duplicate" 
                                                              Click="DuplicateCollection_Click"
                                                              Tag="{Binding}">
                                                        <MenuItem.Icon>
                                                            <Path Data="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"
                                                                  Fill="{StaticResource TextSecondaryBrush}"
                                                                  Width="14" Height="14" Stretch="Uniform"/>
                                                        </MenuItem.Icon>
                                                    </MenuItem>
                                                    <Separator Background="{StaticResource BorderBrush}"/>
                                                    <MenuItem Header="Delete Collection" 
                                                              Click="DeleteCollection_Click"
                                                              Tag="{Binding}"
                                                              Foreground="{StaticResource AccentRedBrush}">
                                                        <MenuItem.Icon>
                                                            <Path Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"
                                                                  Fill="{StaticResource AccentRedBrush}"
                                                                  Width="14" Height="14" Stretch="Uniform"/>
                                                        </MenuItem.Icon>
                                                    </MenuItem>
                                                </ContextMenu>
                                            </Grid.ContextMenu>
                                            
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <!-- Color indicator -->
                                                <Border Grid.Column="0" 
                                                        Width="4" 
                                                        CornerRadius="2"
                                                        Margin="0,2,10,2"
                                                        Background="{Binding Color, Converter={StaticResource HexToBrush}, FallbackValue={StaticResource AccentPurpleBrush}}"/>
                                                
                                                <!-- Name and pin icon -->
                                                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                                    <!-- Pin indicator -->
                                                    <Path Data="M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z"
                                                          Fill="{StaticResource AccentCyanBrush}"
                                                          Width="10" Height="10"
                                                          Stretch="Uniform"
                                                          Margin="0,0,6,0"
                                                          Visibility="{Binding IsPinned, Converter={StaticResource BoolToVis}}"/>
                                                    <TextBlock Text="{Binding Name}" 
                                                               VerticalAlignment="Center"
                                                               TextTrimming="CharacterEllipsis"
                                                               MaxWidth="120"/>
                                                </StackPanel>
                                                
                                                <!-- Model count badge -->
                                                <Border Grid.Column="2" 
                                                        Background="{StaticResource BackgroundLightBrush}"
                                                        CornerRadius="10"
                                                        Padding="8,1"
                                                        VerticalAlignment="Center">
                                                    <TextBlock Text="{Binding ModelCount}"
                                                               FontSize="10"
                                                               Foreground="{StaticResource TextSecondaryBrush}"/>
                                                </Border>
                                            </Grid>
                                        </Grid>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </Expander>

                        <!-- Quick Actions -->
                        <TextBlock Text="QUICK ACTIONS" 
                                   Style="{StaticResource CaptionText}"
                                   Margin="12,24,0,12"
                                   FontWeight="SemiBold"
                                   FontSize="11"/>

                        <Button Style="{StaticResource SecondaryButton}"
                                Command="{Binding OpenVaultFolderCommand}"
                                HorizontalAlignment="Stretch"
                                Margin="4,0,4,8">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"
                                      Fill="{StaticResource TextSecondaryBrush}"
                                      Width="16" Height="16"
                                      Stretch="Uniform"
                                      Margin="0,0,10,0"/>
                                <TextBlock Text="Open Vault Folder" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <Button Style="{StaticResource SecondaryButton}"
                                Command="{Binding ToggleFileWatcherCommand}"
                                HorizontalAlignment="Stretch"
                                Margin="4,0,4,8">
                            <StackPanel Orientation="Horizontal">
                                <Ellipse Width="8" Height="8" 
                                         Margin="0,0,10,0">
                                    <Ellipse.Style>
                                        <Style TargetType="Ellipse">
                                            <Setter Property="Fill" Value="{StaticResource AccentRedBrush}"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsWatcherRunning}" Value="True">
                                                    <Setter Property="Fill" Value="{StaticResource AccentGreenBrush}"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Ellipse.Style>
                                </Ellipse>
                                <TextBlock VerticalAlignment="Center">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Text" Value="Start Watcher"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsWatcherRunning}" Value="True">
                                                    <Setter Property="Text" Value="Watcher Active"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </StackPanel>
                        </Button>



                        <Button Style="{StaticResource SecondaryButton}"
                                Command="{Binding OpenCategoryManagementCommand}"
                                HorizontalAlignment="Stretch"
                                Margin="4,0,4,8">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4Z"
                                      Fill="{StaticResource AccentPurpleBrush}"
                                      Width="16" Height="16"
                                      Stretch="Uniform"
                                      Margin="0,0,10,0"/>
                                <TextBlock Text="Manage Categories" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <Button Style="{StaticResource SecondaryButton}"
                                Command="{Binding OpenSettingsCommand}"
                                HorizontalAlignment="Stretch"
                                Margin="4,0,4,8">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"
                                      Fill="{StaticResource TextSecondaryBrush}"
                                      Width="16" Height="16"
                                      Stretch="Uniform"
                                      Margin="0,0,10,0"/>
                                <TextBlock Text="Settings" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </ScrollViewer>

                <!-- Footer Stats -->
                <Border Grid.Row="3" 
                        Background="{StaticResource BackgroundDarkBrush}"
                        Padding="20,16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="{Binding TotalModels}" 
                                       FontSize="24" 
                                       FontWeight="Bold"
                                       Foreground="{StaticResource AccentCyanBrush}"/>
                            <TextBlock Text="Models" 
                                       Style="{StaticResource CaptionText}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1">
                            <TextBlock Text="{Binding TotalGcodes}" 
                                       FontSize="24" 
                                       FontWeight="Bold"
                                       Foreground="{StaticResource AccentBlueBrush}"/>
                            <TextBlock Text="G-codes" 
                                       Style="{StaticResource CaptionText}"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
    </Border>
</UserControl>

